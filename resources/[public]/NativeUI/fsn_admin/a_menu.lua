-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-- Data storage
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
local characters = {}
AddEventHandler('fsn_main:updateCharacters', function(tbl)
 characters = tbl
end)
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-- Menu
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
_menuPool = MenuPool.New()
AdminMenu = UIMenu.New("Admin", "~b~:FSN: Admin Module", 1425, 20)
_menuPool:Add(AdminMenu)

-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-- Random
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
local checkbox_god = UIMenuCheckboxItem.New("Godmode", AdminMenu, "Enables/disables godmode")
local checkbox_pblips = UIMenuCheckboxItem.New("Player Blips", AdminMenu, "Enables/disables player blips")
AdminMenu:AddItem(checkbox_god)
AdminMenu:AddItem(checkbox_pblips)

-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-- Character
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
local submenu_char = _menuPool:AddSubMenu(AdminMenu, "Character Management", 'Manage a character', true)
local ply_button_refresh = UIMenuItem.New("", "")
ply_button_refresh:RightLabel("~r~REFRESH")
submenu_char:AddItem(ply_button_refresh)
submenu_char.OnItemSelect = function(sender, item, index)
  if item == ply_button_refresh then
    for k, v in pairs(characters) do
      print("["..v.ply_id.."] "..v.char_fname..' '..v.char_fname)
      submenu_char:AddItem(UIMenuItem.New("["..v.ply_id.."] "..v.char_fname..' '..v.char_fname, ""))
    end
  end
end

-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-- Player
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
local submenu_ply = _menuPool:AddSubMenu(AdminMenu, "Connection Management", 'Manage a player', true)

-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-- World
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
local submenu_world = _menuPool:AddSubMenu(AdminMenu, "World Management", 'Manage the world', true)

-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-- Queue
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
local submenu_queue = _menuPool:AddSubMenu(AdminMenu, "Queue Management", 'Manage/view the queue', true)
submenu_queue:AddItem(UIMenuItem.New("~r~This area is still in development!", ""))

-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-- Dev
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
local submenu_dev = _menuPool:AddSubMenu(AdminMenu, "Developer Tools", 'List of tools for developer usage. ~r~Not for use on the live server!', true)

-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-- Command
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
RegisterNetEvent('fsn_admin:menu:toggle')
AddEventHandler('fsn_admin:menu:toggle', function()
  AdminMenu:Visible(not AdminMenu:Visible())
end)

-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-- Process shit
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Citizen.CreateThread(function()
  while true do
    Citizen.Wait(0)
    _menuPool:ProcessMenus()
  end
end)
